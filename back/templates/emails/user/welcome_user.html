{% extends "emails/base.html" %}

{% block title %}Cr√©ation de compte - EuropGreen Solar{% endblock %}

{% block content %}
<div>
    <!-- En-t√™te professionnel -->
    <div style="margin-bottom: 24px;">
        <h2 style="font-size: 24px; font-weight: 600; color: #111827; margin-bottom: 16px; margin-top: 0; text-align: center;">
            Bienvenue {{ user.first_name }} {{ user.last_name }},
        </h2>
        <p style="color: #374151; line-height: 1.6; margin: 0; text-align: center; font-size: 16px;">
            Votre compte utilisateur a √©t√© cr√©√© avec succ√®s sur notre plateforme de gestion. 
            Vous trouverez ci-dessous vos identifiants de connexion ainsi que les informations 
            relatives √† votre profil.
        </p>
    </div>

    <!-- Informations de connexion -->
    <div style="background-color: #f8fafc; border: 2px solid #e2e8f0; border-radius: 12px; padding: 24px; margin-bottom: 32px;">
        <h3 style="font-size: 20px; font-weight: 600; color: #2d3748; margin-bottom: 20px; margin-top: 0; text-align: center;">
            Informations de connexion
        </h3>
        
        <!-- Email -->
        <div style="margin-bottom: 20px;">
            <div style="margin-bottom: 8px;">
                <strong style="color: #4a5568; font-size: 14px;">Adresse email :</strong>
            </div>
            <div style="background-color: #ffffff; padding: 12px 16px; border: 1px solid #cbd5e0; border-radius: 8px; font-family: 'SF Mono', Consolas, 'Ubuntu Mono', 'Roboto Mono', monospace; font-size: 15px; color: #2d3748; word-break: break-all;">
                {{ user.email }}
            </div>
        </div>
        
        <!-- Mot de passe -->
        <div style="margin-bottom: 20px;">
            <div style="margin-bottom: 8px;">
                <strong style="color: #4a5568; font-size: 14px;">Mot de passe temporaire :</strong>
            </div>
            <div style="background-color: #fff5f5; padding: 14px 18px; border: 2px solid #feb2b2; border-radius: 8px; font-family: 'SF Mono', Consolas, 'Ubuntu Mono', 'Roboto Mono', monospace; font-size: 17px; color: #c53030; word-break: break-all; font-weight: 600; letter-spacing: 0.5px; line-height: 1.6;">
                {{ password }}
            </div>
        </div>
        
        <!-- Fonction -->
        <div>
            <div style="margin-bottom: 8px;">
                <strong style="color: #4a5568; font-size: 14px;">Fonction :</strong>
            </div>
            <div style="background-color: #edf2f7; padding: 12px 16px; border-radius: 8px; font-size: 15px; color: #2d3748; font-weight: 500;">
                {{ role_display }}
            </div>
        </div>
    </div>

    <!-- Acc√®s plateforme -->
    <div style="text-align: center; margin-bottom: 32px;">
        <a href="{{ frontend_url }}/login" target="_blank"
           style="display: inline-block; background: linear-gradient(135deg, #48bb78, #38a169); color: white; font-weight: 600; padding: 16px 40px; border-radius: 12px; text-decoration: none; font-size: 16px; box-shadow: 0 4px 12px rgba(72, 187, 120, 0.3); transition: all 0.3s ease;">
            Acc√©der √† la plateforme
        </a>
        <p style="margin-top: 12px; color: #718096; font-size: 13px; margin-bottom: 0;">
            Cliquez sur le bouton pour vous connecter
        </p>
    </div>

    <!-- Droits d'acc√®s selon le type d'utilisateur -->
    {% if user.is_superuser %}
    <div style="background: linear-gradient(135deg, #f0fff4, #c6f6d5); border: 2px solid #9ae6b4; border-radius: 12px; padding: 24px; margin-bottom: 32px;">
        <h4 style="color: #22543d; font-weight: 700; margin-bottom: 16px; margin-top: 0; font-size: 18px; text-align: center;">
            Droits administrateur
        </h4>
        <p style="color: #2f855a; font-size: 15px; margin-bottom: 16px; margin-top: 0; text-align: center;">
            En tant qu'administrateur, vous disposez d'un acc√®s complet √† l'ensemble des fonctionnalit√©s de la plateforme.
        </p>
        <div style="color: #2f855a; font-size: 14px;">
            <div style="margin-bottom: 8px; padding: 8px 0;">‚úÖ Gestion compl√®te des utilisateurs et permissions</div>
            <div style="margin-bottom: 8px; padding: 8px 0;">‚úÖ Supervision de tous les projets d'installation</div>
            <div style="margin-bottom: 8px; padding: 8px 0;">‚úÖ Acc√®s √† l'ensemble des devis et commandes</div>
            <div style="margin-bottom: 8px; padding: 8px 0;">‚úÖ Gestion des proc√©dures administratives</div>
            <div style="padding: 8px 0;">‚úÖ Configuration et param√©trage du syst√®me</div>
        </div>
    </div>
    {% elif user_access %}
    <div style="background: linear-gradient(135deg, #f0fff4, #c6f6d5); border: 2px solid #9ae6b4; border-radius: 12px; padding: 24px; margin-bottom: 32px;">
        <h4 style="color: #22543d; font-weight: 700; margin-bottom: 16px; margin-top: 0; font-size: 18px; text-align: center;">
            Vos droits d'acc√®s
        </h4>
        <p style="color: #2f855a; font-size: 15px; margin-bottom: 16px; margin-top: 0; text-align: center;">
            Votre profil vous donne acc√®s aux modules suivants :
        </p>
        <div style="font-size: 14px;">
            {% if user_access.installation %}
            <div style="margin-bottom: 8px; padding: 8px 0; color: #2f855a;">
                ‚úÖ Gestion des installations
            </div>
            {% endif %}
            {% if user_access.offers %}
            <div style="margin-bottom: 8px; padding: 8px 0; color: #2f855a;">
                ‚úÖ Gestion des devis
            </div>
            {% endif %}
            {% if user_access.requests %}
            <div style="margin-bottom: 8px; padding: 8px 0; color: #2f855a;">
                ‚úÖ Traitement des demandes
            </div>
            {% endif %}
            {% if user_access.administrative_procedures %}
            <div style="padding: 8px 0; color: #2f855a;">
                ‚úÖ Proc√©dures administratives
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- Instructions importantes -->
    <div style="background-color: #fffaf0; border: 2px solid #fbd38d; border-radius: 12px; padding: 20px; margin-bottom: 32px;">
        <h4 style="color: #c05621; font-weight: 600; margin-bottom: 16px; margin-top: 0; font-size: 16px; text-align: center;">
            Instructions importantes
        </h4>
        <div style="color: #c05621; font-size: 14px; line-height: 1.6;">
            <div style="margin-bottom: 8px; padding: 4px 0;">‚Ä¢ Changez votre mot de passe lors de votre premi√®re connexion</div>
            <div style="margin-bottom: 8px; padding: 4px 0;">‚Ä¢ Vos identifiants sont strictement personnels et confidentiels</div>
            <div style="margin-bottom: 8px; padding: 4px 0;">‚Ä¢ D√©connectez-vous syst√©matiquement en fin de session</div>
            <div style="padding: 4px 0;">‚Ä¢ Contactez le service technique pour toute assistance</div>
        </div>
    </div>

    <!-- Message de cl√¥ture -->
    <div style="border-top: 2px solid #e2e8f0; padding-top: 24px; text-align: center;">
        <p style="color: #4a5568; line-height: 1.8; margin: 0; font-size: 15px;">
            Nous vous souhaitons une utilisation optimale de notre plateforme.<br>
            L'√©quipe EuropGreen Solar reste √† votre disposition pour tout accompagnement.
        </p>
    </div>
</div>
{% endblock %}

{% block footer_content %}
<div style="margin-bottom: 16px;">
    <p style="color: #2d3748; font-weight: 600; font-size: 15px; margin-bottom: 4px; margin-top: 0;">
        EuropGreen Solar
    </p>
    <p style="color: #718096; font-size: 13px; margin: 0;">
        Plateforme de gestion des projets photovolta√Øques
    </p>
</div>

<div style="border-top: 1px solid #cbd5e0; padding-top: 16px;">
    <p style="color: #718096; font-size: 12px; margin: 0; line-height: 1.5;">
        üìß Message automatique - Informations confidentielles<br>
        En cas de r√©ception par erreur, merci de nous en informer et de supprimer ce message.
    </p>
</div>
{% endblock %}
