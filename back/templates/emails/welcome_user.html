{% extends "emails/base.html" %}

{% block title %}Création de compte - EuropGreen Solar{% endblock %}

{% block header_subtitle %}
<!-- Le logo contient déjà toutes les informations nécessaires -->
{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- En-tête professionnel -->
    <div class="mb-6">
        <h2 class="text-xl font-medium text-gray-900 mb-3">
            Bonjour {{ user.first_name }} {{ user.last_name }},
        </h2>
        <p class="text-gray-700 leading-relaxed">
            Votre compte utilisateur a été créé avec succès sur notre plateforme de gestion. 
            Vous trouverez ci-dessous vos identifiants de connexion ainsi que les informations 
            relatives à votre profil.
        </p>
    </div>

    <!-- Informations de connexion -->
    <div class="bg-gray-50 border border-gray-200 rounded-lg p-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">
            Informations de connexion
        </h3>
        
        <div class="space-y-4">
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-2 items-center">
                <span class="font-medium text-gray-700">Adresse email :</span>
                <span class="sm:col-span-2 bg-white px-3 py-2 border border-gray-300 rounded text-sm font-mono">
                    {{ user.email }}
                </span>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-2 items-center">
                <span class="font-medium text-gray-700">Mot de passe temporaire :</span>
                <span class="sm:col-span-2 bg-white px-3 py-2 border border-gray-300 rounded text-sm font-mono">
                    {{ password }}
                </span>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-2 items-center">
                <span class="font-medium text-gray-700">Fonction :</span>
                <span class="sm:col-span-2 text-gray-900">
                    {{ user.get_role_display }}
                </span>
            </div>
        </div>
    </div>

    <!-- Accès plateforme -->
    <div class="text-center py-4">
        <a href="{{ frontend_url }}/login" 
           class="inline-block bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-medium py-3 px-8 rounded-lg shadow-md hover:shadow-lg transition-all duration-200">
            Accéder à la plateforme
        </a>
    </div>

    <!-- Droits d'accès selon le type d'utilisateur -->
    {% if user.is_superuser %}
    <div class="bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-lg p-6">
        <h4 class="text-green-800 font-semibold mb-3">Droits administrateur</h4>
        <p class="text-green-700 text-sm mb-3">
            En tant qu'administrateur, vous disposez d'un accès complet à l'ensemble des fonctionnalités de la plateforme.
        </p>
        <div class="text-green-600 text-sm space-y-1">
            <div>• Gestion complète des utilisateurs et permissions</div>
            <div>• Supervision de tous les projets d'installation</div>
            <div>• Accès à l'ensemble des devis et commandes</div>
            <div>• Gestion des procédures administratives</div>
            <div>• Configuration et paramétrage du système</div>
        </div>
    </div>
    {% elif user.useraccess %}
    <div class="bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-lg p-6">
        <h4 class="text-green-800 font-semibold mb-3">Vos droits d'accès</h4>
        <p class="text-green-700 text-sm mb-3">
            Votre profil vous donne accès aux modules suivants :
        </p>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm">
            {% if user.useraccess.installation %}
            <div class="flex items-center text-green-600">
                <span class="text-green-500 mr-2 font-bold">✓</span>
                Gestion des installations
            </div>
            {% endif %}
            {% if user.useraccess.offers %}
            <div class="flex items-center text-green-600">
                <span class="text-green-500 mr-2 font-bold">✓</span>
                Gestion des devis
            </div>
            {% endif %}
            {% if user.useraccess.requests %}
            <div class="flex items-center text-green-600">
                <span class="text-green-500 mr-2 font-bold">✓</span>
                Traitement des demandes
            </div>
            {% endif %}
            {% if user.useraccess.administrative_procedures %}
            <div class="flex items-center text-green-600">
                <span class="text-green-500 mr-2 font-bold">✓</span>
                Procédures administratives
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- Instructions importantes -->
    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
        <h4 class="text-yellow-900 font-medium mb-2">Instructions importantes</h4>
        <div class="text-yellow-800 text-sm space-y-1">
            <div>• Changez votre mot de passe lors de votre première connexion</div>
            <div>• Vos identifiants sont strictement personnels et confidentiels</div>
            <div>• Déconnectez-vous systématiquement en fin de session</div>
            <div>• Contactez le service technique pour toute assistance</div>
        </div>
    </div>

    <!-- Message de clôture -->
    <div class="border-t border-gray-200 pt-6 text-center">
        <p class="text-gray-700 leading-relaxed">
            Nous vous souhaitons une utilisation optimale de notre plateforme.<br>
            L'équipe EuropGreen Solar reste à votre disposition pour tout accompagnement.
        </p>
    </div>
</div>
{% endblock %}

{% block footer_content %}
<div class="mb-4">
    <p class="text-gray-800 font-medium text-sm mb-1">
        EuropGreen Solar - Service Informatique
    </p>
    <p class="text-gray-600 text-xs">
        Plateforme de gestion des projets photovoltaïques
    </p>
</div>

<div class="border-t border-gray-300 pt-4">
    <p class="text-gray-500 text-xs">
        Message automatique - Informations confidentielles<br>
        En cas de réception par erreur, merci de nous en informer et de supprimer ce message.
    </p>
</div>
{% endblock %}
